---
title: "Обнаружение новых сообщений электронной почты на сервере POP3"
url: /ru/net/detecting-new-email-messages-on-pop3-server/
weight: 100
type: docs
---


С помощью учетных записей POP3 вы можете оставлять сообщения на сервере при их загрузке и чтении. Оставление сообщений электронной почты на сервере означает, что они доступны другим приложениям и отдельным пользователям, например пользователям, которые получают доступ к электронной почте с нескольких устройств. Или вы можете захотеть загружать только те сообщения, которые соответствуют определенным критериям, например сообщения с определенной темой. Для управления электронной почтой вы можете:

- Прочитайте все сообщения с почтового сервера POP3 с помощью Aspose.Email.
- Загрузите сообщения в локальную базу данных.

Сообщения не удаляются, а остаются на сервере. При первом запуске этот процесс работает нормально. Все необходимые сообщения загружаются в базу данных. Но при втором запуске загружаются те же сообщения, потому что они все еще находятся на почтовом сервере. Это приводит к дублированию записей. Чтобы решить эту проблему, используйте [Pop3MessageInfo.UniqueID](https://apireference.aspose.com/net/email/aspose.email.clients.pop3/pop3messageinfo/properties/uniqueid) свойство для проверки того, было ли уже загружено сообщение. Уникальный идентификатор сообщения должен храниться в базе данных: это ключ поиска для обнаружения новых сообщений.
## **Обнаружение новых сообщений**
Чтобы идентифицировать новые электронные письма из списка писем на сервере POP3, выполните следующие действия:

1. Подключитесь к серверу.
1. Получите список электронных писем.
1. Подключитесь к базе данных.
1. Получите список электронных писем.
1. Сравните списки.
1. Сохраняйте новые письма в базе данных.

Процесс ускоряется, если вы:

1. Извлеките все уникальные идентификаторы сообщений в хеш-таблицу.
1. Ищите каждое сообщение электронной почты в хеш-таблице, а не в базе данных в цикле foreach (...).

Вместо запроса к базе данных каждого сообщения, требующего многократных вызовов базы данных, этот метод требует только одного вызова. В следующем фрагменте кода показано, как обнаруживать новые сообщения электронной почты на сервере POP3.



{{< gist "aspose-com-gists" "6e5185a63aec6fd70d83098e82b06a32" "Examples-CSharp-Knowledge-Base-DetectingNewMessages-DetectingNewMessages.cs" >}}
