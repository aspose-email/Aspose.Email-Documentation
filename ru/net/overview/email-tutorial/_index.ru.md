---
title: "Учебник по электронной почте"
url: /ru/net/email-tutorial/
weight: 5
type: docs
---

## **Наиболее популярные форматы файлов электронной почты**

### MSG 

**Сообщение Microsoft Outlook (MSG)** — это проприетарный формат электронной почты, используемый Microsoft Outlook для хранения отдельных сообщений электронной почты. Эти файлы содержат содержание электронной почты и метаданные, такие как отправитель, получатели, тема и временные метки. Они поддерживают расширенное форматирование, вложения и специфические для Outlook функции, такие как флаги, важность и конфиденциальность.

#### Основные характеристики

- Файл MSG представляет собой одно сообщение электронной почты.
- Файлы MSG ассоциируются с Microsoft Outlook и могут быть открыты им.
- Файлы MSG обычно используются для архивирования, резервного копирования и обмена элементами Outlook между различными экземплярами Outlook или другими совместимыми почтовыми клиентами.

MSG тесно связан в контексте Microsoft Outlook и **Интерфейса программирования приложений для обмена сообщениями (MAPI)**. MAPI — это интерфейс программирования, который позволяет приложениям взаимодействовать с службами обмена сообщениями, в первую очередь Microsoft Exchange Server и Microsoft Outlook. Он предоставляет набор функций и протоколов для отправки, получения и управления сообщениями электронной почты, а также доступа к другим функциям, связанным с обменом сообщениями, таким как календари, контакты и задачи. MAPI используется Microsoft Outlook для создания, управления и управления сообщениями электронной почты. Когда пользователь создает или получает электронное письмо в Outlook, MAPI обрабатывает основное взаимодействие с почтовым сервером и предоставляет необходимые функции для управления содержимым сообщения.

#### Техническая основа формата MSG

Файлы MSG хранят данные сообщения, используя **свойства MAPI**, которые являются атрибутами, определяющими различные аспекты сообщения. Эти свойства включают стандартные атрибуты, такие как отправитель, получатель, тема и временные метки, а также пользовательские свойства и расширенные атрибуты.
Свойства организуют сообщение в иерархическую структуру, где свойства верхнего уровня определяют общие атрибуты сообщения, а вложенные свойства представляют собой конкретные компоненты, такие как получатели, вложения и встроенные объекты. Файлы MSG могут содержать несколько потоков свойств, каждый из которых содержит набор связанных свойств MAPI. Эти потоки организованы в соответствии с **Файловым форматом Compound File Binary (CFBF)** и хранят как стандартные, так и пользовательские свойства.

### OFT

**Шаблон файла Outlook (OFT)** — это формат электронной почты, используемый Microsoft Outlook для создания стандартизированных сообщений. В отличие от файлов MSG, файлы OFT не содержат фактического содержимого сообщения, а служат шаблонами с предопределенным форматированием, макетом и заполнителями для динамического содержимого. 

#### Основные характеристики

 - Файлы OFT упрощают создание повторяющихся электронных писем, предоставляя заранее разработанные шаблоны для общих сценариев, таких как информационные бюллетени, объявления или ответы.
 - Используя шаблоны OFT, организации обеспечивают согласованность в брендинге, форматировании и сообщениях во всех исходящих коммуникациях.
 - Пользователи могут настраивать шаблоны OFT, добавляя или изменяя содержимое перед отправкой, позволяя создавать персонализированные сообщения при сохранении стандартного форматирования.

### EML

**EML** — один из наиболее широко признаваемых и используемых форматов файлов электронной почты, в первую очередь разработанный в соответствии со стандартом **MIME (Расширения промежуточной Интернет-почты)**. Этот формат имеет широкую поддержку среди различных почтовых клиентов и систем благодаря своему открытому и обобщенному подходу к хранению и передаче электронной почты.

#### Основные характеристики

- Каждый файл EML инкапсулирует одно сообщение электронной почты вместе с его ассоциированными метаданными, такими как отправитель, получатели, тема и временные метки.
- Файлы EML поддерживают расширенное форматирование, вложения и встроенные элементы, соблюдая стандарт MIME, который позволяет гибкое представление содержимого электронной почты.
- В отличие от проприетарных форматов, таких как MSG (Сообщение Microsoft Outlook), которые тесно связаны с конкретным программным обеспечением (Outlook и MAPI), файлы EML предлагают более универсальный подход, совместимый с различными почтовыми программами на разных платформах. Файлы EML совместимы с множеством почтовых клиентов, включая, но не ограничиваясь, Microsoft Outlook, Mozilla Thunderbird, Apple Mail и многие веб-почтовые службы. 

#### Техническая основа для формата EML

Файл EML по своей сути связан со стандартом MIME, который является спецификацией для формата тел сообщений в Интернете. MIME расширяет основной формат электронной почты для поддержки текста в кодировках, отличных от ASCII, а также вложений мультимедийного контента.

**Структура MIME:**

   - Файл EML начинается с секции заголовка, содержащей информацию, такую как От, Кому, Тема, Дата и другие заголовки. Дополнительные заголовки могут включать Content-Type, Content-Transfer-Encoding и другие.
   - Следом за заголовками представлено тело файла EML. Эта секция может содержать простой текст, HTML или многочастичное содержимое, позволяя комбинировать различные типы содержимого в одном сообщении.
   - Файл EML может включать вложения, закодированные в base64, что позволяет передавать двоичные данные по электронной почте. Эти вложения определяются в своих собственных частях MIME с соответствующими заголовками, указывающими тип файла и кодирование.

**MIME типы:**

Содержимое файла EML разбивается на различные MIME типы для различения текста, HTML и других медиа типов. Общие MIME типы, встречающиеся в файле EML, включают:

- `text/plain` для простых текстовых сообщений.
- `text/html` для сообщений, отформатированных в HTML.
- `multipart/mixed` для писем, которые включают как содержимое сообщения, так и вложения.
- `application/octet-stream` для двоичных вложений.

### TNEF

**Формат нейтральной транспортной инкапсуляции (TNEF)** — это проприетарный формат электронной почты, используемый Microsoft Outlook и Microsoft Exchange Server для инкапсуляции свойств электронной почты и содержимого с богатым текстом, которое может не поддерживаться стандартными почтовыми протоколами. 
Он в основном используется клиентами электронной почты Microsoft для кодирования и передачи форматирования с богатым текстом, встроенных объектов и других проприетарных функций электронной почты, обеспечивая сохранность сложного содержимого электронной почты, такого как форматирование, встроенные файлы и события календаря, при отправке электронной почты между различными клиентами электронной почты Microsoft.

#### Основные характеристики

- TNEF может инкапсулировать широкий спектр свойств MAPI, специфических для Microsoft, форматирование с богатым текстом и специальные свойства, которые нельзя передать через стандартную электронную почту MIME или простой текст.
- Элементы Outlook, такие как календарь, контакты, задачи, заметки могут быть инкапсулированы в формате TNEF.
- Непрограммируемые клиенты электронной почты могут не понимать или неправильно обрабатывать вложения TNEF, что часто приводит к появлению раздражающего файла `winmail.dat`. Это обычно происходит, потому что они не могут декодировать проприетарное форматирование, закодированное в TNEF.

#### Техническая основа для формата TNEF

- TNEF инкапсулирует содержимое электронной почты в специальном двоичном вложении. Это вложение, как правило, имеет расширение `.dat`, чаще всего называемое `winmail.dat`.
- Данные TNEF часто ассоциируются с MIME типом `application/ms-tnef`.
- Формат TNEF представляет собой иерархию свойств сообщения в виде плоской структуры, которую можно рассматривать как последовательный поток данных. Типичный формат конкретного свойства в потоке включает идентификатор с информацией о типе данных, размером (если не определено по типу) и данными.

## **Общие форматы хранения электронной почты**

### MBOX

**MBOX (сокращение от Mailbox)** — это широко используемый формат хранения электронной почты, который существует уже несколько десятилетий. Он используется для хранения набора сообщений электронной почты в одном файле, где каждое сообщение объединяется и отделяется линией-разделителем. 

MBOX был впервые разработан в 1970-х годах и с тех пор имел различные версии и реализации на протяжении многих лет. Он был реализован во множестве почтовых клиентов, таких как Unix mail, Mozilla Thunderbird, Eudora и другие.

#### Основные характеристики

- MBOX поддерживается на широком диапазоне платформ, включая Unix, Linux и macOS.
- Клиенты, такие как Mozilla Thunderbird, Apple Mail и многие другие, могут читать и записывать файлы MBOX.
- Простая текстовая структура формата делает его легким для анализа и обработки с помощью инструментов манипуляции текстом.
- Благодаря своей простой структуре MBOX популярен для архивирования и резервного копирования.
- Поскольку все электронные письма хранятся в одном файле, файл со временем может значительно увеличиваться в размерах, что приводит к неэффективности.

#### Варианты MBOX

MBOX существует в нескольких вариантах, каждый с незначительными различиями в том, как они обрабатывают сообщения:

- **MBOXO:** Исходный формат, в котором строки "From " в теле электронной почты заключаются в символ >.
- **MBOXRD:** Вариант MBOXO, который дополнительно расширяет метод цитирования строк "From ".
- **MBOXCL:** Представлен "Классическим" вариантом MBOX, в котором каждая строка "From " цитируется с помощью строки ffrom.
- **MBOXCL2:** Вариант MBOXCL, в котором строки "From " удваиваются для их различения.

#### Техническая основа формата MBOX

**Структура файла:**
  - Файл MBOX представляет собой простой текстовый файл, который содержит серию сообщений EML.
  - Каждое сообщение начинается с строки "From " (пробел после слова "From"), которая обычно включает адрес электронной почты отправителя и временную метку, когда сообщение было получено.
  - Каждое сообщение сопровождается пустой строкой, чтобы отделить его от следующего сообщения.
  
    **Пример:**
    
    ```
    From user@example.com Fri Jan 01 00:00:00 2021
    (Заголовки)
    
    (Содержимое)
    
    From user2@example.com Fri Jan 01 00:01:00 2021
    (Заголовки)
    
    (Содержимое)
    ```

### PST/OST

 **Личная таблица хранения (PST)** и **Таблица оффлайн-хранения (OST)** — это форматы файлов, используемые Microsoft Outlook для хранения копий электронных писем, календарных событий и других элементов.
 
#### Основные характеристики

- Файлы PST используются для хранения личной информации и обычно используются для архивирования старых электронных писем и данных. В основном используются домашними пользователями и небольшими организациями для локального хранения сообщений электронной почты, контактов и календарных событий.
- Файлы OST используются для оффлайн-хранения и синхронизации электронных писем и других данных с сервером Exchange. В основном используются пользователями, которые получают доступ к Microsoft Exchange Server или Office 365.
- Хранятся локально на компьютере пользователя. Могут быть доступны даже при отключении пользователя от почтового сервера.
- Файлы PST легко резервировать и передавать на другие компьютеры. Пользователи могут передавать файлы PST между различными системами или версиями Outlook.
- Файлы OST не предназначены для ручного резервного копирования или передачи, так как они являются синхронизированными копиями данных сервера. Файлы OST привязаны к конкретным профилям и не могут быть легко перемещены на другие системы.

### OLM

 **Архивный файл Outlook для Mac (OLM)** — это формат файла, используемый Microsoft Outlook для Mac для хранения сообщений электронной почты, календарных событий, контактов, задач и других элементов.
 
#### Основные характеристики

- Файлы OLM в основном используются для архивирования и резервного копирования электронных писем и других элементов Outlook на системах Mac.
- Файлы OLM хранятся локально на Mac пользователя.
- Файлы OLM могут быть открыты и доступны через Microsoft Outlook для Mac. Они не напрямую совместимы с Outlook для Windows без конверсии.
- Нет фиксированного ограничения по размеру для файлов OLM, установленного Microsoft, но могут возникать проблемы с производительностью, если файл становится очень большим. Пользователи, как правило, управляют размером, создавая несколько меньших архивов, а не один большой файл OLM.
- Резервное копирование: поскольку файлы OLM хранятся локально, их можно резервировать или копировать на внешние устройства хранения.

### TGZ

**TGZ**  (используется Zimbra для файлов резервного копирования почтовых ящиков) — это формат файла, используемый для архивирования и компрессии данных, обычно связанный с системами Unix и Linux. Термин "TGZ" относится к комбинации двух утилит: "tar" (Tape Archive) и "gzip." Формат файла .tar объединяет несколько файлов и каталогов в один архивный файл. Он сохраняет информацию о файловой системе, такую как структуры каталогов, разрешения на файлы и временные метки. Формат .gz сжимает данные, делая tar-архив меньше и проще для управления или передачи. Сжатая природа TGZ делает его подходящим для передачи архивов электронной почты через Интернет или их перемещения между системами.

### NSF

 **Хранилище заметок (NSF)** — это проприетарный формат файла, используемый в основном IBM Lotus Notes (сейчас HCL Notes) для хранения различных типов данных, включая электронную почту, календарные события, задачи и другие данные приложения. Файлы NSF используют модель базы данных NoSQL на основе документов. Каждая база данных хранится как один файл NSF с расширением .nsf. Расширение представляет собой формат базы данных, используемый IBM Notes и Domino Server. Каждое сообщение электронной почты, запись календаря или задача хранятся как документ, который может содержать различные типы данных, такие как текст, вложения, ссылки, форматирование с богатым текстом и даже метаданные.
 
## **Почтовые протоколы**

### SMTP

**SMTP (Простой протокол передачи почты)** — это протокол, используемый для отправки и получения электронных сообщений через Интернет. Это важная часть процесса коммуникации по электронной почте и в первую очередь отвечает за передачу электронных писем от почтового сервера отправителя к почтовому серверу получателя, а также за отправку писем от клиента к серверу. Порт по умолчанию для SMTP — 25 для связи между почтовыми серверами. Порт 587 и порт 465 также используются для SMTP, при этом 587 обычно используется для отправки почты, а 465 для SMTP через SSL (SMTPS). SMTP определяется [RFC 5321](https://datatracker.ietf.org/doc/html/rfc5321).

#### Основные характеристики

- Поддерживает механизмы аутентификации (например, SMTP AUTH), чтобы обеспечить, что только авторизованные пользователи могут отправлять электронные письма через сервер.
- SMTP может использовать SSL/TLS для шифрования соединения между клиентом и сервером, обеспечивая безопасную передачу данных электронной почты.
- Предоставляет подробные сообщения об ошибках и коды состояния, чтобы указать на успешность или неудачу передачи электронной почты.
- SMTP может обрабатывать многочастичные сообщения, позволяя включать вложения и различные типы содержимого в электронное письмо.
- SMTP является широко принятым и стандартизированным протоколом, обеспечивая совместимость между различными почтовыми системами и клиентами (например, Microsoft Outlook, Mozilla Thunderbird используют SMTP для отправки исходящих писем). Автоматизированные системы и приложения используют SMTP для отправки уведомлений, оповещений и других автоматизированных писем.

### IMAP

**Протокол доступа к интернет-сообщениям (IMAP)** — это стандартный протокол, используемый почтовыми клиентами для доступа, извлечения и управления электронными сообщениями с почтового сервера. Среди поддерживаемых клиентов — Microsoft Outlook, Mozilla Thunderbird, Apple Mail и многие веб-сервисы электронной почты, такие как Gmail, Yahoo Mail и Outlook.com. Наиболее часто используемая версия — IMAP4, определенная [RFC 3501](https://datatracker.ietf.org/doc/html/rfc3501). В отличие от **POP (Протокол почтового отделения)**, который загружает сообщения на локальное устройство, IMAP хранит письма на сервере. Возможность просматривать и управлять электронными сообщениями непосредственно на почтовом сервере предоставляет гибкость доступа к ним с нескольких устройств и из разных мест, уменьшая риск потери данных в случае потери или повреждения устройства. IMAP синхронизирует почтовый клиент с сервером, гарантируя, что изменения, внесенные в одном клиенте (такие как чтение или удаление письма), отображаются во всех других клиентах. IMAP обычно использует порт 143 для нешифрованной связи и порт 993 для зашифрованной (SSL/TLS) связи.

#### Основные характеристики

- Управление папками. IMAP позволяет пользователям создавать, удалять и переименовывать папки на почтовом сервере. Он поддерживает иерархические структуры папок для организации электронной почты.
- IMAP отслеживает статус каждого электронного письма (например, прочитано, непрочитано, помечено, ответ). Эти статусные флаги хранятся на сервере, поэтому они соответствуют всем устройствам.
- IMAP может извлекать определенные части сообщения электронной почты, такие как заголовки или части тела, что может быть полезно для предварительного просмотра писем или работы с большими вложениями.
- IMAP поддерживает поиск и фильтрацию электронной почты на стороне сервера по различным критериям, позволяя клиентам извлекать конкретные сообщения без загрузки всех писем.
- Несколько клиентов могут одновременно получать доступ к одному почтовому ящику. IMAP обрабатывает одновременный доступ и обновляет состояние писем в реальном времени.
- Зависимость от сервера. Поскольку электронные письма хранятся на сервере, для доступа и управления ими необходимо надежное интернет-соединение. Долговременные отключения сервера могут повлиять на доступность электронной почты.
- IMAP может использовать SSL/TLS для шифрования соединения между клиентом и сервером, обеспечивая безопасную передачу данных электронной почты.
- IMAP поддерживает различные методы аутентификации, включая OAuth, для безопасной проверки идентичности пользователей.

#### Расширения протокола

- **IMAP IDLE:** Расширение, которое позволяет серверу уведомлять клиента о новых сообщениях или изменениях в реальном времени, сокращая необходимость в частом опросе.
- **IMAP QUOTA:** Расширение, которое предоставляет механизмы для управления и отчетности о квотах хранения, помогая пользователям управлять размерами своих почтовых ящиков.
- **IMAP MOVE:** Расширение, которое оптимизирует процесс перемещения сообщений между папками на сервере, улучшая производительность.

### POP3

 **Протокол почтового отделения версии 3 (POP3)** — это протокол, используемый почтовыми клиентами, такими как Microsoft Outlook, Mozilla Thunderbird и Apple Mail, для извлечения электронной почты с почтового сервера. Это один из старейших и самых простых протоколов для извлечения электронной почты, предназначенный для загрузки писем на локальное устройство и, при желании, удаления их с сервера.

#### Основные характеристики

- Поскольку электронные письма загружаются на локальное устройство, пользователи могут получать доступ к своим сообщениям в оффлайне без необходимости постоянного подключения к Интернету.
- POP3 прост в настройке и использовании, что делает его доступным для пользователей, которым нужна базовая загрузка почты без расширенных функций.
- POP3 не синхронизирует электронную почту между несколькими устройствами. Как только электронное письмо загружается на одно устройство, оно больше не доступно на сервере по умолчанию.
- POP3 предоставляет ограниченные возможности управления на стороне сервера. Расширенные функции, такие как управление папками, серверный поиск и флаги статуса сообщений, не поддерживаются.
- Поскольку электронные письма хранятся локально, пользователи должны позаботиться о резервном копировании своих данных электронной почты, чтобы предотвратить потерю в случае сбоя устройства.
- Пользователи могут настроить параметры POP3 для немедленного удаления писем с сервера сразу после загрузки, через указанный период или при удалении с локального клиента.
- POP3 может использовать SSL/TLS для шифрования соединения между клиентом и сервером, обеспечивая безопасную передачу данных электронной почты.

#### Версии и расширения протокола

- **POP3 через SSL (POP3S)** — это версия POP3, которая работает через соединение SSL/TLS, обеспечивая зашифрованную связь между клиентом и сервером.
- **APOP (Аутентифицированный протокол почтового отделения)** — это расширение, которое предоставляет более безопасный метод аутентификации с использованием хэширования паролей.

## **API для доступа к почтовым сервисам**

### Exchange Web Dav (официально устарел)

**Exchange WebDAV (Веб-распределенное авторство и версия)** был расширением протокола, используемым Microsoft Exchange Server для того, чтобы позволить клиентам обращаться и манипулировать почтовыми, календарными и контактными элементами, хранящимися на сервере через HTTP. Хотя он официально устарел, он сыграл значительную роль в разработке веб-доступа и удаленного доступа к данным Exchange.

### EWS

**Службы веб-обмена (EWS)** — это API, предоставляемый Microsoft для взаимодействия с Microsoft Exchange Server. Он позволяет разработчикам программно получать доступ и управлять данными Exchange, такими как электронные письма, календарные события, контакты и задачи. EWS был введен для замены старых протоколов, таких как WebDAV, и предоставляет более надежный и эффективный способ работы с данными Exchange. 

Он использует SOAP (Простой протокол доступа объектов) через HTTP и HTTPS для отправки и получения сообщений между клиентом и сервером Exchange. Основная природа EWS на основе SOAP может быть сложной для реализации и отладки по сравнению с RESTful API. Microsoft постепенно переходит на Microsoft Graph API, который предоставляет более современный и RESTful подход для доступа к данным Microsoft 365, включая Exchange Online.

### Microsoft Graph

**Microsoft Graph** — это мощный API, который предоставляет унифицированную конечную точку для доступа к широкому спектру данных и служб в экосистеме Microsoft 365. Он позволяет разработчикам взаимодействовать с разнообразными службами Microsoft, включая Office 365, Azure Active Directory, SharePoint, OneDrive, Outlook, Microsoft Teams и другие. Он служит вратами к данным и аналитике по всему Microsoft 365.

#### Основные характеристики

- Базовый URL для API — https://graph.microsoft.com.
- Использует OAuth 2.0 для аутентификации и авторизации.
- Использует возможности ИИ и машинного обучения Microsoft для улучшения аналитики данных.

### Gmail API

**Gmail API** — это RESTful API, предоставляемый Google, который позволяет разработчикам программно взаимодействовать с почтовыми ящиками Gmail и выполнять различные операции над данными электронной почты (читать, отправлять, удалять и организовывать электронные сообщения). Он предлагает более гибкую и мощную альтернативу традиционным протоколам IMAP и SMTP, позволяя разработчикам получать доступ и управлять сообщениями, потоками, метками, черновиками и другими элементами Gmail. Он доступен через Google Cloud Platform.

#### Основные характеристики

- Выполнение нескольких запросов API в одном вызове HTTP для повышения эффективности и снижения количества сетевых запросов.
- Использует OAuth 2.0 для безопасной аутентификации и авторизации, гарантируя, что приложения получают доступ только к данным, на которые пользователи явно предоставили разрешение.
- Предоставляет различные области разрешений, позволяя приложениям запрашивать только уровень доступа, который им нужен (например, доступ только для чтения, полный доступ).
- Все взаимодействия API происходят через HTTPS для обеспечения безопасной связи между приложением и серверами Google.

## **Современные технологии**

### S/MIME

**Безопасные/Многоцелевые расширения интернет-почты (S/MIME)** — это широко используемый стандарт для обеспечения безопасности электронной почты. Он предоставляет метод для отправки и получения подписанных и зашифрованных сообщений электронной почты, гарантируя целостность, подлинность и конфиденциальность сообщения.

#### Основные характеристики

- S/MIME обеспечивает, что только предполагаемый получатель может прочитать содержимое электронной почты. Он использует комбинацию симметричных (для скорости) и ассиметричных (для обмена ключами) алгоритмов шифрования. Обычно используемые алгоритмы включают RSA (используемый для ассиметричного шифрования), AES или Стандарт межсетевой безопасности (один из симметричных алгоритмов) и Triple DES.
- Подтверждает личность отправителя. 
- Верифицирует, что содержимое электронной почты не было изменено во время передачи. Предотвращает отказ отправителя от авторства электронной почты. 
- Использует закрытый ключ отправителя для создания подписи, а клиент получателя использует открытый ключ отправителя для ее проверки.
- S/MIME полагается на инфраструктуру открытых ключей (PKI) для управления и обмена ключами. Цифровые сертификаты, выданные Удостоверяющими центрами (CA), связывают открытые ключи с индивидуальными идентичностями. Сертификаты обычно следуют стандарту X.509.

### DKIM

**Доменные ключи идентифицированной почты (DKIM)** — это механизм аутентификации электронной почты, предназначенный для обнаружения поддельных адресов отправителей, распространённой техники, используемой в фишинге и подделке почты. Он позволяет организации взять на себя ответственность за электронное письмо в процессе его передачи, связывая доменное имя с сообщением, тем самым обеспечивая его подлинность и целостность. DKIM проверяет, что электронная почта, предположительно пришедшая с конкретного домена, действительно была авторизована владельцем домена, в первую очередь фокусируясь на подлинности электронного адреса "От". Это достигается путём предоставления отправителю возможности электронно подписывать свою электронную почту с использованием закрытого ключа, в то время как получатель проверяет эту подпись, используя открытый ключ, опубликованный в DNS-записях отправителя.

#### Основные характеристики

- DKIM добавляет заголовок "DKIM-Signature" к электронной почте, который содержит цифровую подпись и несколько ключевых параметров. Тело электронной почты и выбранные заголовки хешируются с использованием алгоритма хеширования, такого как SHA-256. Этот хеш затем шифруется с помощью закрытого ключа отправителя для создания цифровой подписи.
- Отправитель публикует открытый ключ в своих записях DNS. Почтовый сервер получателя ищет открытый ключ отправителя в DNS для проверки цифровой подписи.

### AMP Email

**Ускоренные мобильные страницы (AMP)** для электронной почты — это открытая структура, разработанная для создания динамичных, интерактивных и увлекательных почтовых впечатлений. Она предназначена для того, чтобы сделать электронные письма более динамичными и функциональными, преобразовывая средство, которое традиционно было статичным и пассивным.

#### Основные характеристики

- Позволяет пользователям выполнять действия непосредственно в электронном письме, такие как подтверждение участия в событиях, заполнение форм или взаимодействие с витринами продуктов.
- Электронные письма могут предоставлять динамическое содержимое, которое обновляется в момент открытия. Это обеспечивает показ пользователям актуальной информации, будь то последние цены, статус наличия или новости.
- AMP-письма поддерживаются несколькими крупными почтовыми клиентами, включая Gmail, Yahoo Mail, Outlook.com. Каждый почтовый клиент, поддерживающий AMP-письма, сохраняет свои собственные требования и правила рендеринга.
- AMP-письма необходимо отправлять в многочастичном формате MIME, содержащем версию простого текста для базовой доступности, HTML-версию для богатого и визуально привлекательного содержимого и версию AMP для динамических и интерактивных элементов, обеспечивая совместимость и улучшенный пользовательский опыт среди различных почтовых клиентов.
- Только проверенные отправители могут отправлять AMP-письма, что обеспечивает безопасность и надежность писем.

### AntiSpam

Antispam относится к ряду методов, технологий и стратегий, разработанных для обнаружения, предотвращения и смягчения непрошенных и часто вредоносных электронных сообщений, обычно известных как спам. 

#### Методы защиты от спама

1. **Методы фильтрации**
   - Фильтрация на основе содержимого: анализирует содержимое электронной почты на наличие общих индикаторов спама.
   - Черные списки: списки известных IP-адресов или доменов спама, которые автоматически блокируются.
   - Белые списки: списки одобренных отправителей, которые всегда пропускаются.
   - Эвристическая фильтрация: использует правила и алгоритмы для обнаружения спама на основе шаблонов.
   - Байесовская фильтрация: использует статистические методы для идентификации спама на основе исторических данных.
   - Серый список: временно отклоняет электронные письма от неизвестных отправителей и принимает их, если они подаются снова после задержки.
   - Модели машинного обучения: используют сложные модели, обученные на больших наборах данных, для идентификации спама.

2. **Методы аутентификации**
   - SPF (Sender Policy Framework): проверяет, что IP-адрес отправителя авторизован для отправки электронных писем для домена.
   - DKIM (DomainKeys Identified Mail): использует цифровые подписи для проверки того, что электронная почта не была изменена во время передачи и действительно пришла от домена, который утверждает.
   - DMARC (Аутентификация сообщений на основе домена, отчетность и соблюдение): строится на SPF и DKIM, чтобы предоставить стандартизированный метод для отправителей электронной почты, чтобы указать, что их сообщения защищены, и каким образом получающие серверы должны обрабатывать сбои аутентификации.

### Ошибки доставки электронной почты

#### Типы ошибок доставки электронной почты

1. **Жесткие ошибки.** Постоянные сбои доставки, указывающие на то, что электронная почта не может быть доставлена на адрес получателя.
   - Общие причины:
     - Неверные или несуществующие адреса электронной почты.
     - Домен получателя не существует.
     - Постоянные проблемы с сервером на стороне получателя.
     - Ошибки в написании или форматировании адреса электронной почты.

2. **Мягкие ошибки.** Временные сбои доставки, указывающие на то, что электронная почта не может быть доставлена в данный момент, но может быть успешной, если попробовать повторно отправить позже.
   - Общие причины:
     - Почтовый ящик получателя переполнен.
     - Временные проблемы с сервером на стороне получателя.
     - Сервер электронной почты получателя отключен или недоступен.
     - Слишком большие электронные письма для системы электронной почты получателя.

Почтовые серверы обычно возвращают коды ошибок, которые могут помочь диагностировать причину ошибки.

### Потоковая передача электронной почты

Потоковая передача электронной почты — это метод, используемый почтовыми клиентами и приложениями для группировки связанных электронных писем вместе на основе их темы или разговора, что упрощает пользователям следить за и управлять обменом электронной почты.

#### Основные характеристики

- **Заголовки In-Reply-To и References**. Заголовки электронной почты, которые указывают на предыдущие сообщения в потоке, помогая почтовому клиенту связывать ответы и пересылки с оригинальной электронной почтой.
- Строки тем. Часто используются для группировки электронных писем в потоки. Электронные письма с одинаковой строкой темы, обычно с префиксами "Re:" (ответ) или "Fwd:" (пересылка), группируются вместе.
- Пользователи могут развертывать или сворачивать потоки, сосредотачиваясь только на соответствующих частях разговора.